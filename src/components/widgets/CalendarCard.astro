---
import { Icon } from 'astro-icon/components';

const today = new Date();
const currentMonth = today.getMonth();
const currentYear = today.getFullYear();
const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
const firstDay = new Date(currentYear, currentMonth, 1).getDay(); // 0 is Sunday
// Adjust for Monday start if needed, but Sunday start is standard in many cals.
// The image shows Monday start (一 二 ...). Let's do Monday start.
const startOffset = firstDay === 0 ? 6 : firstDay - 1;

const days = Array.from({ length: daysInMonth }, (_, i) => i + 1);
const blanks = Array.from({ length: startOffset }, (_, i) => i);
---

<div class="bg-dark-800 rounded-xl p-5 shadow-lg border border-white/5 mt-4 group hover:border-primary-500/30 transition-colors">
  <div class="flex items-center justify-between mb-4 px-2">
    <button class="text-gray-500 hover:text-white"><Icon name="ri:arrow-left-s-line" /></button>
    <span class="text-white font-bold">{currentYear}年{currentMonth + 1}月</span>
    <button class="text-gray-500 hover:text-white"><Icon name="ri:arrow-right-s-line" /></button>
  </div>
  
  <div class="grid grid-cols-7 gap-1 text-center text-xs mb-2">
    <span class="text-gray-500">一</span>
    <span class="text-gray-500">二</span>
    <span class="text-gray-500">三</span>
    <span class="text-gray-500">四</span>
    <span class="text-gray-500">五</span>
    <span class="text-gray-500">六</span>
    <span class="text-gray-500">日</span>
  </div>
  
  <div class="grid grid-cols-7 gap-1 text-center text-sm">
    {blanks.map(() => (
      <span></span>
    ))}
    {days.map(day => (
      <span class={`
        w-8 h-8 flex items-center justify-center rounded-full
        ${day === today.getDate() 
          ? 'bg-primary-500 text-white shadow-glow' 
          : 'text-gray-400 hover:bg-dark-700 hover:text-white cursor-pointer'}
      `}>
        {day}
      </span>
    ))}
  </div>
</div>
