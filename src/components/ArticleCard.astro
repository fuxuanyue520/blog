---
import type { CollectionEntry } from 'astro:content';
import { formatDate } from '../utils/date';
import { Clock, Calendar, Tag } from 'lucide-react';

interface Props {
  article: CollectionEntry<'posts'>;
}

const { article } = Astro.props;
const { title, description, publishedAt, tags, readingTime, category } = article.data;
---

<article class="group relative flex flex-col gap-4 p-6 rounded-2xl bg-dark-800/30 hover:bg-dark-800/50 border border-dark-800 hover:border-dark-700 transition-all duration-300">
  <div class="flex items-center gap-3 text-xs text-gray-500 mb-1">
    <span class="flex items-center gap-1">
      <Calendar className="w-3.5 h-3.5" />
      {formatDate(publishedAt)}
    </span>
    <span>â€¢</span>
    <span class="flex items-center gap-1">
      <Clock className="w-3.5 h-3.5" />
      {readingTime} min read
    </span>
    <span class={`ml-auto px-2 py-0.5 rounded-full text-[10px] font-medium uppercase tracking-wider border ${
      category === 'tech' 
        ? 'bg-blue-500/10 text-blue-400 border-blue-500/20' 
        : category === 'essay'
        ? 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20'
        : 'bg-purple-500/10 text-purple-400 border-purple-500/20'
    }`}>
      {category}
    </span>
  </div>

  <h2 class="text-xl font-bold text-gray-100 group-hover:text-primary-400 transition-colors">
    <a href={`/posts/${article.slug}`} class="focus:outline-none">
      <span class="absolute inset-0" aria-hidden="true"></span>
      {title}
    </a>
  </h2>

  <p class="text-gray-400 text-sm leading-relaxed line-clamp-2">
    {description}
  </p>

  <div class="flex flex-wrap gap-2 mt-2">
    {tags.map((tag) => (
      <span class="flex items-center gap-1 text-xs text-gray-500 bg-dark-800 px-2 py-1 rounded-md border border-dark-700/50">
        <Tag className="w-3 h-3" />
        {tag}
      </span>
    ))}
  </div>
</article>
